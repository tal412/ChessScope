<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChessScope - Opening Analysis</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Test function to check stockfish.js accessibility
      window.testStockfishAccess = async () => {
        try {
          console.log('üß™ Testing stockfish.js accessibility...');
          const response = await fetch('/stockfish.js');
          console.log('üì° Fetch response status:', response.status);
          console.log('üì° Fetch response ok:', response.ok);
          console.log('üì° Fetch response type:', response.type);
          console.log('üì° Fetch response size:', response.headers.get('content-length'));
          
          if (response.ok) {
            const text = await response.text();
            console.log('üìÑ File size:', text.length, 'characters');
            console.log('üìÑ File starts with:', text.substring(0, 100));
            console.log('üìÑ Contains STOCKFISH?', text.includes('STOCKFISH'));
            console.log('üìÑ Contains stockfish?', text.includes('stockfish'));
          } else {
            console.error('‚ùå Failed to fetch stockfish.js:', response.status, response.statusText);
          }
        } catch (error) {
          console.error('‚ùå Error testing stockfish.js:', error);
        }
      };
      
      // Dynamic script loading with error handling
      console.log('üîÑ Loading stockfish.js...');
      const script = document.createElement('script');
      script.src = '/stockfish.js';
      script.onload = () => {
        console.log('‚úÖ stockfish.js loaded successfully');
        console.log('window.STOCKFISH type:', typeof window.STOCKFISH);
        console.log('window.stockfish type:', typeof window.stockfish);
        // Test what's available globally
        console.log('Available globals:', Object.keys(window).filter(k => k.toLowerCase().includes('stock')));
        // Dispatch custom event
        window.dispatchEvent(new CustomEvent('stockfish-loaded'));
      };
      script.onerror = (e) => {
        console.error('‚ùå Failed to load stockfish.js:', e);
        console.error('Check if file exists at /stockfish.js');
        console.log('üí° Run window.testStockfishAccess() to test file accessibility');
      };
      document.head.appendChild(script);
    </script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
